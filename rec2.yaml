apiVersion: app.redislabs.com/v1
kind: RedisEnterpriseCluster
metadata:
  name: rec2
  labels:
    app: redis-enterprise
spec:
  # Add fields here
  nodes: 3
  # need to expose api port on LB to make it reachable from other cluster
  #services:
  #  apiService: 
  #    type: LoadBalancer
  #uiServiceType: LoadBalancer
  # the below for A/A routing
  ingressOrRouteSpec:
    apiFqdnUrl: api-rec2-redis.lab
    dbFqdnSuffix: -db-rec2-redis.lab
    ingressAnnotations:
      nginx.ingress.kubernetes.io/ssl-passthrough: "true"
      kubernetes.io/ingress.class: nginx
    method: ingress